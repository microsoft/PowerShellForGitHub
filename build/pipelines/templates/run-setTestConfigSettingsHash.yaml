#
# This template contains the necessary jobs to run PSScriptAnalyzer on the repo and
# report the results.
#

steps:
  - powershell: |
      $content = Get-Content -Path .\Tests\Config\Settings.ps1 -Raw
      $hash = Get-SHA512Hash -PlainText $content
      $configurationFile = Get-Content -Path .\GitHubConfiguration.ps1
      $updated = $configurationFile -replace "'testConfigSettingsHash' = '[^']+'", "'testConfigSettingsHash' = '$hash'"
      $updated | Set-Content -Path .\GitHubConfiguration.ps1
    displayName: 'Set GitHubConfiguration.ps1 testConfigSettingsHash value.' 

